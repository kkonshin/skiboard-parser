# skiboard-parser
skiboard.ru parser

Для ручного запуска парсера скопировать репозиторий, перейти в папку 
skiboard-parser и запустить скрипт командой консоли php -f console.php 

> При первом запуске происходит полный разбор .xml файла и 
запись всех товаров и ТП во временный раздел инфоблока каталога.
Требуется не менее 10гб свободного места на диске для сохранения
временных файлов изображений.

Настройки парсера производятся в файле конфигурации config.php

- Время выполнения скрипта
- Отображение ошибок
- Установка констант и пр.

SOURCE = внешний адрес .xml файла
SOURCE_SAVE_PATH = адрес директории для сохранения .xml файла 
SKU_IBLOCK_ID = ID инфоблока торговых предложений
HIGHLOAD_ID = ID хайлоад блока со справочником производителей

Массивы $summer и $winter содержат списки категорий товаров летнего и зимнего 
ассортимента. Это влияет на установку цен.

>Если появится новая категория товаров, ее необходимо будет добавить в один из
этих массивов.

После первого заполнения временного раздела инфоблока, парсер сохраняет в
папке /save/ скачанный .xml файл каталога. 
При следующем запуске сравнивается дата выгрузки в сохраненном файле и в
файле на удаленном сервере. Если даты совпадают, обновления каталога не происходит.

Если каталог на удаленном сервере обновился - парсер либо деактивирует отсутствующие
в новом каталоге товары, либо запишет в инфоблок новые товары.

Также автоматически произойдет добавление новых свойств торговых предложений и 
значений свойств типа "список" и "справочник".
